# Pony 指南

欢迎来到 Pony 指南！如果你正在阅读本指南，那意味着你想要学习 Pony ，那就让我们开始吧

本指南面向的是具有一定编程经验的开发者。不管你是了解一些 Python 或者 Ruby，还是你是一个 JavaScrip\Java\Scala\C\C++\Haskell\OCaml 黑客，只要是曾经写过一些代码就都可以。

## Pony 是什么？

Pony 是一门面向对象的，基于 Actor 模型，能力安全（capabilities-secure）的编程语言。Pony 是一门**面向对象的**的语言，像 Python、Java、c++和许多其他语言一样，支持类和对象。同时，Pony 采用了 Actor 模型，内置了对于 Actor 的支持（类似于 Erlang 或 Akka ）。Actor 类似于对象，但它们可以执行异步代码。

当我们说 Pony 是**能力安全（capabilities-secure）**，指的是一下几点:

* 类型安全。真正的类型安全，参见相关的数学证明 [proof](http://www.ponylang.org/media/papers/opsla237-clebsch.pdf)。
* 内存安全。虽然这点是由类型安全保证的，但是这个特性依然很有趣。没有悬空指针，没有缓冲区溢出，而且，Pony 甚至没有空指针（null）的概念！
* 异常安全。没有运行时异常。所有的异常都有确定的语义，而且异常总是会被显示处理的。
* 没有数据竞争。Pony 没有锁或原子操作之类的东西。取而代之的是，Pony 的类型系统在编译时就确保你的并发程序永远不会有数据竞争。因此，您可以编写高并发的代码，并且永远不会出错。
* 没有死锁。很简单，因为 Pony 根本没有锁！所以也就绝对不会死锁，因为锁根本不存在。

后边还会讲解能力安全（capabilities-security），包括**对象能力（object capabilities）**和**引用能力（reference capabilities）**。

## Pony 的哲学： 把事情完成

按照[Richard Gabriel](http://www.jwz.org/doc/worse-is-better.html)的看法, Pony 的哲学既不是"the-right-thing"，也不是"worse-is-better"，而是“把事情完成（get-stuff-done）”。

* 正确。不正确是不允许的，_如果不能保证正确性，把事情完成是毫无疑义的。_

* 性能。运行时性能是除正确性之外最重要的要求。如果为了正确性需要牺牲性能，那就试着换个实现方式。_程序越快越好。这是除了能得到正确结果之外最重要的事情。_

* 简单。为了性能，可惜牺牲掉对简单的要求。接口的简单要比实现的简单更重要。_程序员把事情完成的速度越快越好。有时候为了性能可以把程序员的工作弄的复杂一些，但是减轻程序员的负担比保持语言/运行时的简洁要重要的多。_

* 一致性。为了简单或者性能，可以牺牲掉一致性。_不要让一致性阻碍了“把事情完成”这一步目标。_

* 完整性。包含的范围越大越好，但是可以为了目标牺牲掉完整性。_It's better to get some stuff done now than wait until everything can get done later._

“get-stuff-done”方法对正确性和简单性的态度与“正确的东西”相同，但对一致性和完整性的态度与“worse-is-better”相同。它还将性能作为一个新原则，将其视为第二重要的东西(在正确性之后)。

## 指导原则

在语言的设计和发展过程中，应遵循以下原则。

* 使用 get-stuff-done 方法。

* 语法简单。语言的解析不管是对人类还是对计算机来说都应该是轻而易举的。

* 没有动态加载的代码。编译器知道一切。

* 完全类型安全。没有“相信我，我知道我在做什么”的强行转换。

* 完全内存安全。没有“这个随机数真的是一个指针，真的。”这种事儿

* 没有崩溃。编译通过的程序不应该崩溃(尽管它可能会挂起或做一些意想不到的事情)。

* 合理的错误消息。尽可能使用简单的错误消息来处理特定的错误。可以假设程序员知道我们词典中单词的定义，但要避免使用编译器或其他计算机科学术语。

* 内置的构建系统。不需要配置或构建单独的应用程序。

* 通过使用限制性语法减少常见的编程 bug。

* 提供一种简单、干净、清晰的解决方法，而不是迎合每个程序员的偏好。

* 保证升级干净。不要试图将新特性与它们正在替换的特性合并在一起，如果有什么东西被破坏掉了，就要一次性替换掉。在可能的情况下，为在语言版本之间升级源代码提供重写工具。

* 合理的构建时间。减少构建时间很重要，但是比运行时性能和正确性要稍逊一些。

* 允许程序员从代码中省略一些东西(默认参数、类型推断等等)是可以的，但是应该总是允许用户做完全指定。

* 没有歧义。程序员不应该猜测编译器会做什么，反之亦然。

* 对所必须的复杂性提供文档说明。并不是所有的语言特性都应该轻易就能理解，但是复杂的特性必须在文档中有完整的解释之后才能在语言中使用。

* 语言特性在不使用时应具有最小的干扰性。

* 完全定义的语义。所有语言特性的语义必须在标准语言文档中可用。不接受未定义或“依赖于实现”的行为。

* 有效的硬件访问必须是可用的，但这并不需要遍及整个语言。

* 标准库应该要用 Pony 来实现。

* 互操作性。必须能与其他语言互操作，但如果使用非元类型，这可能需要一个 shim 层。

* 避免库使用上的痛苦。使用第三方 Pony 库应该尽可能的简单。这包括编写和分发库，以及在单个程序中使用多个版本的库。

## 更多帮助

学习教程的过程中需要更多的帮助？不用担心，我们已经帮你解决了。

如果你正在寻找答案，我们建议你试试我们的 IRC 频道，在 Freenode 上的 #ponylang 频道。如果你问了一个问题，一定要一直待到你得到答案。如果你没有得到答案，或者 IRC 不是你的菜，我们有一个友好的[邮件列表](https://groups.io/g/pony+user)，你可以试试。无论你问的问题是什么，它都不愚蠢，我们也不会生气。

你发现了一个错误？先通过写邮件来确认你的理解。一旦你确定这是一个错误，开一个(issue)(https://github.com/ponylang/ponyc/issues)。

# 帮助我们

在本教程中发现了一个输入错误？或者有些东西讲解的不清楚？我们欢迎对教程提 PR:[https://github.com/ponylang/pony-tutorial](https://github.com/ponylang/pony-tutorial)。

请在提 PR 之前先查看[贡献指南](https://github.com/ponylang/pony-tutorial/blob/master/CONTRIBUTING.md)。
